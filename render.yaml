# Render Blueprint for DSMeventos
# This file can be used to deploy both services to Render

services:
  # API Gateway Service
  - type: web
    name: dsmeventos-api-gateway
    env: node
    buildCommand: cd api-gateway && npm install
    startCommand: cd api-gateway && npm start
    plan: free # Change to 'starter' or higher for production
    region: oregon # Change to your preferred region
    branch: main
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 5000
      - key: JWT_SECRET
        value: 8TxBUpTP0MGfXm6KeAt8
      - key: JWT_EXPIRES_IN
        value: 1h
      - key: CORS_ORIGIN
        value: https://dsmeventos-frontend.onrender.com
      - key: AUTH_SERVICE_URL
        value: https://dsm-eventos-authservice.onrender.com
      - key: EVENTS_SERVICE_URL
        value: https://dsmeventos-events-service.onrender.com
      - key: NOTIFICATION_SERVICE_URL
        value: # Leave empty to use mocks
      - key: ORDERS_SERVICE_URL
        value: # Leave empty to use mocks
      - key: USE_MOCKS
        value: false

  # Frontend Service
  - type: web
    name: dsmeventos-frontend
    env: node
    buildCommand: cd frontend && npm install && npm run build
    startCommand: cd frontend && npm start
    plan: free # Change to 'starter' or higher for production
    region: oregon # Change to your preferred region
    branch: main
    healthCheckPath: /
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3000
      - key: NEXT_PUBLIC_API_URL
        value: https://dsmeventos-api-gateway.onrender.com
      - key: NEXT_PUBLIC_ENV
        value: production

